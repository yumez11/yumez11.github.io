(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{126:function(e,t,o){"use strict";var n=o(127);t.a={login:function(e){return n.a.post("/exam/login",e)},logOut:function(e){return n.a.post("/exam/login/logout",e)},getPaperUrl:function(e){return n.a.get("/exam/paper",e)},heartbeat:function(e){return n.a.post("/exam/heartbeat",e)},submitPaper:function(e,t){return n.a.upload(e,"/exam/submit",t)},answerStatus:function(e){return n.a.post("/exam/status",e)},ping:function(){return n.a.get("/exam/ping",{})},getLatestVersion:function(){return n.a.get("/exam/version/getLatestVersion",{})},saveStatus:function(e){return n.a.post("/exam/saveStatus",e)},updateStuSeat:function(e){return n.a.post("/exam/updateStudentSeatNo",e)},getStuInfo:function(e){return n.a.get("/exam/getStuInfo",e)},updateTestPaper:function(e){return n.a.post("/exam/updateTestPaper",e)},uploadWavFile:function(e,t){return n.a.uploadWavFile(e,"/exam/uploadFile",t)}}},127:function(e,t,o){"use strict";function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"get",t=arguments[1],o=arguments[2],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},s=f()(n,[]),l=void 0!==s.needLoading&&s.needLoading,d=void 0!==s.needSuccessInfo&&s.needSuccessInfo,u=void 0!==s.needIntercept&&s.needIntercept,g=o?JSON.parse(p()(o)):o;e=e.toLowerCase();var h=l?x.Loading.service({lock:!0,text:"加载中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}):null;return s.authId&&(!s.headers&&(s.headers={}),s.headers["x-auth-id"]=s.authId),new v.a((function(o,n){a().then((function(a){i(a),C(c()(r()({url:t,method:e},/^p/i.test(e)?"data":"params",g),s)).then((function(e){var t=e.data;return h&&h.close(),0!==t.code&&u?(x.Notification.closeAll(),Object(x.Notification)({title:"错误",dangerouslyUseHTMLString:!0,message:"错误码："+t.code+"<br/>错误信息："+t.message,type:"error",duration:3e3}),o(t)):(d&&(x.Notification.closeAll(),Object(x.Notification)({title:"成功",message:"操作成功",type:"success",duration:3e3})),o(t))})).catch((function(e){if(e.response&&u){var t=e.response.status;Object(x.Notification)({dangerouslyUseHTMLString:!0,title:"错误",message:"错误码："+t+"<br/>错误信息："+e.response.data.message,type:"error",duration:3e3}),h&&h.close()}return n(e)}))}))}))}function i(e){C.defaults.baseURL=e}function a(){return new v.a((function(e){y.a.get("teacher_config",(function(t,o){if(t)e("http://127.0.0.1:3000");else{var n="http://"+o.host+":"+o.port;e(n)}}))}))}var s=o(139),r=o.n(s),l=o(119),c=o.n(l),d=o(18),p=o.n(d),u=o(141),f=o.n(u),g=o(125),v=o.n(g),h=o(21),m=o.n(h),b=o(142),w=o.n(b),x=o(22),_=(o.n(x),o(104)),y=o.n(_),C=m.a.create({baseURL:"http://192.168.0.111:3000",withCredentials:!0,timeout:6e4,paramsSerializer:function(e){return w.a.stringify(e,{indices:!1})}});C.interceptors.request.use((function(e){return e.headers["x-from-site"]=process.env.VUE_APP_WEB_SITE_ID,e.headers["Content-Type"]="application/json;charset=UTF-8","get"===e.method&&(e.headers["If-Modified-Since"]="Mon, 26 Jul 1997 05:00:00 GMT",e.headers["Cache-Control"]="no-cache",e.headers.Pragma="no-cache"),e}),(function(e){v.a.reject(e)})),n.get=function(e,t,o){return n("get",e,t,o)},n.post=function(e,t,o){return n("post",e,t,o)},n.upload=function(e,t,o){return function(e,t,o){var n=o.userId,i=new FormData,s=new File([e],n+".zip",{type:"application/zip"});i.append("test",s),i.append("userId",n),i.append("examId",o.examId),i.append("batchId",o.batchId);var r={headers:{"Content-Type":"multipart/form-data"}};return new v.a((function(e,o){a().then((function(n){m.a.post(n+t,i,r).then((function(t){e(t.data)})).catch((function(e){o(e)}))}))}))}(e,t,o)},n.uploadWavFile=function(e,t,o){return function(e,t,o){var n=o.userId,i=o.fileName,s=new FormData,r=new File([e],i,{type:"audio/wav"});s.append("test",r),s.append("userId",n);var l={headers:{"Content-Type":"multipart/form-data"}};return new v.a((function(e,o){a().then((function(n){m.a.post(n+t,s,l).then((function(t){e(t.data)})).catch((function(e){o(e)}))}))}))}(e,t,o)},n.setBaseUrl=function(e){return i(e)},t.a=n},132:function(e){e.exports=JSON.parse('{"name":"ArtExamStudent","version":"1.0.5","author":"bkrwin","description":"新知测评学生端","license":"BKRWIN","main":"./dist/electron/main.js","scripts":{"upload":"node .electron-vue/upload.js","release":"node .electron-vue/build.js && electron-builder && node .electron-vue/upload.js","build":"node .electron-vue/build.js && electron-builder","build:32":"node .electron-vue/build.js && electron-builder --win --ia32","build:dir":"node .electron-vue/build.js && electron-builder --dir","build:clean":"cross-env BUILD_TARGET=clean node .electron-vue/build.js","build:web":"cross-env BUILD_TARGET=web node .electron-vue/build.js","build:win32":"cross-env BUILD_TARGET=win32 node .electron-vue/build.js","dev":"node .electron-vue/dev-runner.js","lint":"eslint --fix --ext .js,.vue -f ./node_modules/eslint-friendly-formatter src","lint:fix":"eslint --ext .js,.vue -f ./node_modules/eslint-friendly-formatter --fix src","pack":"npm run pack:main && npm run pack:renderer","pack:main":"cross-env NODE_ENV=production webpack --progress --colors --config .electron-vue/webpack.main.config.js","pack:renderer":"cross-env NODE_ENV=production webpack --progress --colors --config .electron-vue/webpack.renderer.config.js","postinstall":"npm run lint:fix","package":"electron-packager ./dist/electron --overwrite --platform=win32 --arch=x64 --out=out --icon=build/icons/icon256.ico"},"build":{"productName":"新知测评学生端","appId":"ArtExamStudent","directories":{"output":"out"},"extraResources":["./extraResources/**"],"files":["dist/electron/**/*"],"publish":[{"provider":"generic","url":"http://art-exam-dev.oss-cn-shanghai.aliyuncs.com/electron/update/"}],"releaseInfo":{"releaseNotes":"修改bug,增加演唱题","releaseName":"Force"},"win":{"icon":"build/icons/icon256.ico","target":[{"target":"nsis"}]},"nsis":{"oneClick":false,"allowElevation":true,"allowToChangeInstallationDirectory":true},"electronDownload":{"mirror":"https://npm.taobao.org/mirrors/electron/"}},"dependencies":{"adm-zip":"^0.4.13","axios":"^0.18.0","crypto-js":"^4.0.0","electron-json-storage":"^4.1.8","electron-log":"^4.0.7","electron-updater":"^4.2.4","element-ui":"^2.13.0","fs-extra":"^8.1.0","inline-worker":"^1.1.0","js-audio-recorder":"^0.5.4","lodash-id":"^0.14.0","lowdb":"^1.0.0","mediaelementjs":"^4.2.10","os-volume-controll":"^0.1.2","regedit":"^5.0.0","tone":"^14.7.77","vue":"^2.5.16","vue-router":"^3.0.1","vuedraggable":"^2.23.2","vuex":"^3.0.1","zip-dir":"^1.0.2"},"devDependencies":{"ajv":"^6.5.0","ali-oss":"^6.5.1","babel-core":"^6.26.3","babel-eslint":"^8.2.3","babel-loader":"^7.1.4","babel-minify-webpack-plugin":"^0.3.1","babel-plugin-transform-runtime":"^6.23.0","babel-preset-env":"^1.7.0","babel-preset-stage-0":"^6.24.1","babel-register":"^6.26.0","cfonts":"^2.1.2","chalk":"^2.4.2","copy-webpack-plugin":"^4.5.1","cross-env":"^5.1.6","css-loader":"^0.28.11","del":"^3.0.0","devtron":"^1.4.0","electron":"5.0.3","electron-builder":"^20.19.2","electron-debug":"^1.5.0","electron-devtools-installer":"^2.2.4","eslint":"^4.19.1","eslint-config-standard":"^11.0.0","eslint-friendly-formatter":"^4.0.1","eslint-loader":"^2.0.0","eslint-plugin-html":"^4.0.3","eslint-plugin-import":"^2.12.0","eslint-plugin-node":"^6.0.1","eslint-plugin-promise":"^3.8.0","eslint-plugin-standard":"^3.1.0","file-loader":"^1.1.11","html-webpack-plugin":"^3.2.0","mini-css-extract-plugin":"0.4.0","multispinner":"^0.2.1","node-loader":"^0.6.0","node-sass":"^4.13.1","sass-loader":"^7.0.3","sass-resources-loader":"^2.0.1","style-loader":"^0.21.0","url-loader":"^1.0.1","vue-devtools":"^5.1.4","vue-html-loader":"^1.2.4","vue-loader":"^15.2.4","vue-style-loader":"^4.1.0","vue-template-compiler":"^2.5.16","webpack":"^4.15.1","webpack-cli":"^3.0.8","webpack-dev-server":"^3.1.4","webpack-hot-middleware":"^2.22.2","webpack-merge":"^4.1.3"},"__npminstall_done":false}')},145:function(){},165:function(e,t,o){var n=o(241);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,o(4).default)("f00b4efa",n,!0,{})},167:function(e,t,o){var n=o(255);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,o(4).default)("bc74a0be",n,!0,{})},168:function(e,t,o){var n=o(257);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,o(4).default)("7acca647",n,!0,{})},169:function(e,t,o){var n=o(259);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,o(4).default)("1c280c9e",n,!0,{})},240:function(e,t,o){"use strict";var n=o(165);o.n(n)},241:function(e,t,o){(e.exports=o(3)(!1)).push([e.i,"audio,img,video{max-width:100%}",""])},254:function(e,t,o){"use strict";var n=o(167);o.n(n)},255:function(e,t,o){(e.exports=o(3)(!1)).push([e.i,".host-wrapper[data-v-5941ce64]{height:350px;width:600px;background:#fff;border-radius:6px;position:relative;display:flex;flex-direction:column}.host-wrapper .top-title[data-v-5941ce64]{width:100%;height:30px;background:#3cc2ff;color:#fff;border-top-left-radius:5px;border-top-right-radius:5px;line-height:30px;padding:0 22px;display:flex;justify-content:space-between}.host-wrapper .top-title .mark[data-v-5941ce64]{display:inline-block;height:12px;width:5px;background:#fff;margin-right:10px;margin-top:1px;border-radius:3px}.host-wrapper .top-title i[data-v-5941ce64]{cursor:pointer}.host-wrapper .body[data-v-5941ce64]{flex:1;display:flex;justify-content:center;align-items:center;flex-direction:column}.host-wrapper .body .table[data-v-5941ce64]{width:556px;border:1px solid #cecece;border-radius:6px;color:#333}.host-wrapper .body .table .row[data-v-5941ce64]{display:flex}.host-wrapper .body .table .row .column[data-v-5941ce64]{height:45px;line-height:45px}.host-wrapper .body .table .row .left-column[data-v-5941ce64]{width:30%;text-align:right;padding-right:10px;border-right:1px solid #cecece}.host-wrapper .body .table .row .right-column[data-v-5941ce64]{width:70%;padding-left:10px;text-align:left;display:flex;align-items:center}.host-wrapper .body .table .row .right-column .point[data-v-5941ce64]{width:10px;text-align:center}.host-wrapper .body .table .row .right-column .v-check-result[data-v-5941ce64]{color:#ffb512;margin-left:30px}.host-wrapper .body .tip[data-v-5941ce64]{color:#666;width:556px;margin-top:10px}.host-wrapper .body .confirm-btn[data-v-5941ce64]{margin-top:25px;height:30px;line-height:30px;width:100px;background:#01c4ff;border-radius:15px;border-color:#01c4ff;padding:0;font-size:1.4rem}.host-wrapper .body .table-btn[data-v-5941ce64]{background:#fff;border:1px solid #3cc2ff;height:28px;line-height:28px;width:90px;color:#3cc2ff;margin-left:30px;margin-top:0;padding:0;font-size:1.4rem;border-radius:14px}.host-wrapper .body .table-btn.yellow[data-v-5941ce64]{border:1px solid #ffb512;color:#ffb512;margin-left:0}.host-wrapper .body .alert[data-v-5941ce64]{display:inline-block;color:red}.host-wrapper .result i[data-v-5941ce64]{font-size:100px;color:#ffb512}",""])},256:function(e,t,o){"use strict";var n=o(168);o.n(n)},257:function(e,t,o){(e.exports=o(3)(!1)).push([e.i,".update-wrapper[data-v-dfb844de]{height:350px;width:400px;background:#fff;border-radius:6px;position:relative;display:flex;flex-direction:column}.update-wrapper .top-title[data-v-dfb844de]{width:100%;height:30px;background:#3cc2ff;color:#fff;border-top-left-radius:5px;border-top-right-radius:5px;line-height:30px;padding:0 22px;display:flex;justify-content:space-between}.update-wrapper .top-title .mark[data-v-dfb844de]{display:inline-block;height:12px;width:5px;background:#fff;margin-right:10px;margin-top:1px;border-radius:3px}.update-wrapper .top-title i[data-v-dfb844de]{cursor:pointer}.update-wrapper .body[data-v-dfb844de]{display:flex;flex-direction:column;align-items:center}.update-wrapper .body p[data-v-dfb844de]{margin:0}.update-wrapper .body .title[data-v-dfb844de]{margin-top:40px;color:#333;font-weight:700;font-size:14px}.update-wrapper .body .desc[data-v-dfb844de]{width:300px}.update-wrapper .body .update-btn[data-v-dfb844de]{height:30px;line-height:30px;width:100px;background:#01c4ff;border-radius:15px;border-color:#01c4ff;padding:0;font-size:1.4rem;box-shadow:0 4px 6px 0 #c0f0ff}.update-wrapper .body .update-btn.default[data-v-dfb844de]{color:#3cc2ff;background:#fff;border:1px solid #3cc2ff;box-shadow:0 4px 6px 0 #c0f0ff}",""])},258:function(e,t,o){"use strict";var n=o(169);o.n(n)},259:function(e,t,o){(e.exports=o(3)(!1)).push([e.i,".login-wrapper[data-v-e9af6804]{height:100%;display:flex;background:#01c4ff;position:relative;justify-content:center;align-items:center}.login-wrapper .top_left[data-v-e9af6804]{position:absolute;left:24px;top:18px}.login-wrapper .top_left .imgs[data-v-e9af6804]{height:20px}.login-wrapper .top_left .ipids[data-v-e9af6804]{position:absolute;top:0;right:-220px;color:#fff;font-size:17px;font-weight:bolder}.login-wrapper .top-btn[data-v-e9af6804]{position:absolute;right:5px;top:15px}.login-wrapper .top-btn i[data-v-e9af6804]{color:#fff;margin-right:10px;cursor:pointer}.login-wrapper .top-btn[data-v-e9af6804] .el-icon-edit-outline:before{font-weight:800;font-size:17px}.login-wrapper .top-btn .cool-max[data-v-e9af6804]{cursor:pointer;height:15px;width:15px;font-weight:800}.login-wrapper .seat-area[data-v-e9af6804]{position:absolute;left:20px;top:20px;color:#2993b2;font-size:48px;font-weight:bolder;padding:16px 20px;border-radius:5px}.login-wrapper .login-area[data-v-e9af6804]{background:#fff;width:970px;height:650px;border-radius:20px;display:flex;position:relative;justify-content:center;align-items:center;flex-direction:column}.login-wrapper .login-area .logo[data-v-e9af6804]{width:240px}.login-wrapper .login-area .form-area[data-v-e9af6804]{display:flex;margin-top:80px;margin-bottom:50px}.login-wrapper .login-area .form-area img[data-v-e9af6804]{width:430px}.login-wrapper .login-area .form-area .login-form[data-v-e9af6804]{display:flex;align-items:center;justify-content:center;flex-direction:column;height:320px;margin-left:50px}.login-wrapper .login-area .form-area .login-form .logo_admin[data-v-e9af6804]{font-size:18px;font-weight:800;margin-bottom:20px}.login-wrapper .login-area .form-area .login-form input[data-v-e9af6804]{width:250px;height:38px;padding-left:38px;border:1px solid #dbdbdb;border-radius:19px;font-size:1.4rem;outline:none}.login-wrapper .login-area .form-area .login-form input[data-v-e9af6804]::-webkit-input-placeholder{color:#999}.login-wrapper .login-area .form-area .login-form .input-icon[data-v-e9af6804]{width:20px;position:absolute;top:9px;left:14px}.login-wrapper .login-area .form-area .login-form .error-msg[data-v-e9af6804]{width:220px;color:red;font-size:12px;margin-top:2px;margin-left:8px}.login-wrapper .login-area .form-area .login-form .submit-btn[data-v-e9af6804]{margin-top:20px;height:38px;line-height:38px;padding:0;width:250px;background:#01c4ff;border-radius:19px;border-color:#01c4ff;font-size:1.5rem}.login-wrapper .login-area[data-v-e9af6804] .el-tabs__item{width:135px}.login-wrapper[data-v-e9af6804] .el-dialog{margin-top:40vh!important}.login-wrapper[data-v-e9af6804] .el-dialog .set{text-align:center}.login-wrapper[data-v-e9af6804] .el-dialog .set .num{margin-bottom:10px}.login-wrapper[data-v-e9af6804] .el-dialog .set /deep/ .el-icon-edit-outline:before{font-size:20px;cursor:pointer}.login-wrapper[data-v-e9af6804] .el-dialog__header{background:#409eff;padding:6px 20px}.login-wrapper[data-v-e9af6804] .el-dialog__header .el-dialog__headerbtn{top:8px}.login-wrapper[data-v-e9af6804] .el-dialog__header .el-dialog__headerbtn .el-dialog__close,.login-wrapper[data-v-e9af6804] .el-dialog__header .el-dialog__title{color:#fff}.host-config[data-v-e9af6804]{display:flex;justify-content:center;align-items:center}",""])},352:function(e,t,o){"use strict";o.r(t);var n=o(135),i=o.n(n),a=o(18),s=o.n(a),r=o(136),l=o.n(r),c=o(16),d=o.n(c),p=o(119),u=o.n(p),f=o(101),g=o(9),v={name:"OssMedia",props:{mediaType:{type:Number,default:g.c.pic},mediaUrl:{type:String,default:""}},data:function(){return{MODULE_TYPE:g.c,OSS_URL:g.d}}},h=(o(240),o(15)),m=Object(h.a)(v,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{width:"100%"}},[e.mediaType===e.MODULE_TYPE.pic?o("img",{attrs:{src:e.OSS_URL+e.mediaUrl}}):e._e(),e._v(" "),e.mediaType===e.MODULE_TYPE.audio?o("audio",{attrs:{src:e.OSS_URL+e.mediaUrl,controls:"controls",controlslist:"nodownload"}}):e._e(),e._v(" "),e.mediaType===e.MODULE_TYPE.video?o("video",{attrs:{src:e.OSS_URL+e.mediaUrl,controls:"controls",controlslist:"nodownload"}}):e._e()])}),[],!1,null,null,null).exports,b=o(7),w=o(126),x=o(104),_=o.n(x),y=o(127),C={name:"host-config",props:{close:{type:Function,default:function(){}},showUpdate:{type:Function,default:function(){}}},data:function(){return{port:3e3,showResult:!1,connectSuccess:!1,loading:!1,ipAddress:[],vCheckResult:"",vCheckLoading:!1,clearLoading:!1,currentVersion:""}},methods:{ipKeyUp:function(e){return+(event.target.value||0)>=+(event.target.max||0)?void this.$refs[e].focus():void((13===event.keyCode||190===event.keyCode||9===event.keyCode)&&this.$refs[e].focus())},getHost:function(){var e=this;_.a.get("teacher_config",(function(t,o){if(t)throw t;var n=o.host||"127.0.0.1";e.ipAddress=n.split("."),e.port=+o.port||3e3}))},updateHost:function(){var e=this;if(this.ipAddress&&!(4>this.ipAddress.length)&&this.port){this.loading=!0;var t=this.ipAddress.join("."),o="http://"+t+":"+this.port;y.a.setBaseUrl(o),_.a.set("teacher_config",{host:t,port:this.port},(function(t){if(t)throw e.loading=!1,t;w.a.ping().then((function(t){e.connectSuccess=0===t.code,e.loading=!1,e.showResult=!0}),(function(t){throw e.loading=!1,e.connectSuccess=!1,e.showResult=!0,t}))}))}},confirm:function(){this.connectSuccess?this.close():this.showResult=!1},checkVersion:function(){var e=this;this.vCheckLoading=!0;var t=o(132).version;w.a.getLatestVersion().then((function(o){return e.vCheckLoading=!1,0===o.code&&o.value&&o.value.versionNo?void(o.value.versionNo===t?e.vCheckResult="未检测到新版本":(e.vCheckResult="检测到新版本：V "+o.value.versionNo,e.showUpdate(o.value.versionNo,o.value.summary,o.value.fileUrl))):void(e.tipText="检查失败，请重试！")}))},clearCache:function(){var e=this;this.clearLoading=!0,f.ipcRenderer.send("clear-cache"),setTimeout((function(){e.clearLoading=!1}),2e3)},getCurrentVersion:function(){var e=o(132);this.currentVersion=e.version}},mounted:function(){this.getHost(),this.getCurrentVersion()}},k=(o(254),Object(h.a)(C,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"host-wrapper"},[o("div",{staticClass:"top-title"},[e._m(0),e._v(" "),o("i",{staticClass:"iconfont iconchahao",on:{click:function(){return e.close()}}})]),e._v(" "),e.showResult?e._e():o("div",{staticClass:"body"},[o("div",{staticClass:"table"},[o("div",{staticClass:"row",staticStyle:{"border-bottom":"1px solid #cecece"}},[o("div",{staticClass:"left-column column"},[e._v("监考端IP地址：")]),e._v(" "),o("div",{staticClass:"right-column column"},[o("el-input-number",{ref:"ip0",staticStyle:{width:"55px"},attrs:{size:"small",controls:!1,min:0,max:999},nativeOn:{keyup:function(){return e.ipKeyUp("ip1")}},model:{value:e.ipAddress[0],callback:function(t){e.$set(e.ipAddress,0,t)},expression:"ipAddress[0]"}}),e._v(" "),o("div",{staticClass:"point"},[e._v(".")]),e._v(" "),o("el-input-number",{ref:"ip1",staticStyle:{width:"55px"},attrs:{size:"small",controls:!1,min:0,max:999},nativeOn:{keyup:function(){return e.ipKeyUp("ip2")}},model:{value:e.ipAddress[1],callback:function(t){e.$set(e.ipAddress,1,t)},expression:"ipAddress[1]"}}),e._v(" "),o("div",{staticClass:"point"},[e._v(".")]),e._v(" "),o("el-input-number",{ref:"ip2",staticStyle:{width:"55px"},attrs:{size:"small",controls:!1,min:0,max:999},nativeOn:{keyup:function(){return e.ipKeyUp("ip3")}},model:{value:e.ipAddress[2],callback:function(t){e.$set(e.ipAddress,2,t)},expression:"ipAddress[2]"}}),e._v(" "),o("div",{staticClass:"point"},[e._v(".")]),e._v(" "),o("el-input-number",{ref:"ip3",staticStyle:{width:"55px"},attrs:{size:"small",controls:!1,min:0,max:999},nativeOn:{keyup:function(){return e.ipKeyUp("port")}},model:{value:e.ipAddress[3],callback:function(t){e.$set(e.ipAddress,3,t)},expression:"ipAddress[3]"}})],1)]),e._v(" "),o("div",{staticClass:"row",staticStyle:{"border-bottom":"1px solid #cecece"}},[o("div",{staticClass:"left-column column"},[e._v("监考端端口号：")]),e._v(" "),o("div",{staticClass:"right-column column"},[o("el-input-number",{ref:"port",staticStyle:{width:"250px"},attrs:{size:"small",controls:!1,min:0,max:1e4,placeholder:"请输入端口"},model:{value:e.port,callback:function(t){e.port=t},expression:"port"}})],1)]),e._v(" "),o("div",{staticClass:"row",staticStyle:{"border-bottom":"1px solid #cecece"}},[o("div",{staticClass:"left-column column"},[e._v("当前版本：")]),e._v(" "),o("div",{staticClass:"right-column column"},[o("span",[e._v("V "+e._s(e.currentVersion))]),e._v(" "),o("el-button",{staticClass:"table-btn",attrs:{type:"primary",loading:e.vCheckLoading},on:{click:function(){return e.checkVersion()}}},[e._v("检查更新")]),e._v(" "),e.vCheckResult?o("span",{staticClass:"v-check-result"},[e._v(e._s(e.vCheckResult))]):e._e()],1)]),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"left-column column"},[e._v("清除缓存：")]),e._v(" "),o("div",{staticClass:"right-column column"},[o("el-button",{staticClass:"table-btn yellow",attrs:{type:"primary",loading:e.clearLoading},on:{click:function(){return e.clearCache()}}},[e._v("清除缓存")]),e._v(" "),o("div",{staticClass:"alert"},[e._v("（考生数据会清空，请谨慎操作）")])],1)])]),e._v(" "),o("div",{staticClass:"tip"},[e._v("注意：端口号需与老师端统一，无特殊原因请勿随意修改。")]),e._v(" "),o("el-button",{staticClass:"confirm-btn",attrs:{type:"primary",loading:e.loading},on:{click:function(){return e.updateHost()}}},[e._v("确认")])],1),e._v(" "),e.showResult?o("div",{staticClass:"body result"},[e.connectSuccess?e._e():o("i",{staticClass:"iconfont iconsadness"}),e._v(" "),e.connectSuccess?o("i",{staticClass:"iconfont iconsmile"}):e._e(),e._v(" "),e.connectSuccess?e._e():o("span",[e._v("该服务不可用！")]),e._v(" "),e.connectSuccess?o("span",[e._v("连接成功！")]):e._e(),e._v(" "),o("el-button",{staticClass:"confirm-btn",attrs:{type:"primary"},on:{click:function(){return e.confirm()}}},[e._v("确认")])],1):e._e()])}),[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("span",{staticClass:"mark"}),o("span",[e._v("系统配置")])])}],!1,null,"5941ce64",null).exports),S={name:"update",props:{close:{type:Function,default:function(){}},latestVersion:{type:String,default:""},descList:{type:String,default:""},downloadUrl:{type:String,default:""}},data:function(){return{currentVersion:"",dowloading:!1,percentage:0}},methods:{ignore:function(){_.a.set("ignore_version",{version:this.latestVersion}),this.close()},updateNow:function(){this.dowloading=!0,f.ipcRenderer.send("download-latest-version",this.downloadUrl)},getCurrentVersion:function(){var e=o(132);this.currentVersion=e.version}},mounted:function(){this.getCurrentVersion()}},I=(o(256),Object(h.a)(S,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"update-wrapper"},[e._m(0),e._v(" "),e.dowloading?e._e():o("div",{staticClass:"body"},[o("div",{staticClass:"title"},[e._v("有新版本了！是否升级？")]),e._v(" "),o("div",{staticClass:"margin-t-20 desc"},[o("p",[e._v("当前版本：V "+e._s(e.currentVersion))]),e._v(" "),o("p",[e._v("新版本：V "+e._s(e.latestVersion))])]),e._v(" "),o("div",{staticClass:"margin-t-20 desc"},[o("span",[e._v("新版本说明：")]),e._v(" "),o("div",[e._v(e._s(e.descList||"无"))])]),e._v(" "),o("div",{staticStyle:{"margin-top":"40px"}},[o("el-button",{staticClass:"update-btn default",attrs:{type:"primary"},on:{click:function(){return e.ignore()}}},[e._v("忽略此版本")]),e._v(" "),o("el-button",{staticClass:"update-btn default",attrs:{type:"primary"},on:{click:function(){return e.close()}}},[e._v("暂不升级")]),e._v(" "),o("el-button",{staticClass:"update-btn",attrs:{type:"primary"},on:{click:function(){return e.updateNow()}}},[e._v("立即升级")])],1)]),e._v(" "),e.dowloading?o("div",{staticClass:"body",staticStyle:{"margin-top":"95px"}},[o("span",[e._v("正在下载中，请稍等...")])]):e._e()])}),[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"top-title"},[o("div",[o("span",{staticClass:"mark"}),o("span",[e._v("提示")])])])}],!1,null,"dfb844de",null).exports),U=o(112),L={name:"login-page",components:{OssMedia:m,HostConfig:k,Update:I},data:function(){return{setnum:1,seatNo:1,ipId:"",loginMessage:"",loginLoading:!1,editshoe:!1,setbtnShow:!0,editbtnshow:!1,loginStatusShow:!1,showHostConfig:!1,errorMsg:"",loginInfo:{},isUpdateShow:!1,showSeat:!1,latestVersion:"",descList:[],latestVersionUrl:"",examInfo:{},maxshow:!1}},created:function(){this.ipIdes()},methods:u()({},Object(b.b)("Common",["set_student_info"]),{inputFocus:function(){this.errorMsg=""},ipIdes:function(){var e=U.networkInterfaces(),t={},o=[];for(var n in e)e[n].forEach((function(e,i){console.log("ipIdes"),"IPv4"===e.family&&(t[n+(i?":"+i:"")]=e.address,o.push(e.address))}));var i=[];o.forEach((function(e){if(console.log("ipdata"),"127.0.0.1"!==e)return i.push(e)})),this.ipId=i[0]},platformLogin:function(){var e=this;_.a.get("teacher_config",(function(t,o){if(!t){if(!o.host||!o.port)return void e.$notify({title:"警告",message:"请先联系老师配置监考端地址！",type:"warning"});var n=d()(e.loginInfo,{type:1,ip:e.ipId});e.login(n)}}))},login:function(e){var t=this;return l()(i.a.mark((function o(){var n,a,r,l,c,d;return i.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!t.debug()){o.next=2;break}return o.abrupt("return");case 2:return o.prev=2,t.loginLoading=!0,n=(new Date).getTime(),e.nowTime=n,o.next=8,w.a.login(e);case 8:a=o.sent,t.loginLoading=!1,0===a.code?(t.examInfo=a.examInfo.result[0],r=a.studentInfo.result[0],!(l={value:{examName:a.examInfo.result[0].examName,name:r.studentName},examInfo:a.examInfo.result[0],studentInfo:a.studentInfo.result[0],batchInfo:a.batchInfo.result[0],userId:t.loginInfo.userId}).studentInfo.loginTime&&(l.studentInfo.loginTime=l.studentInfo.currentTime),c=s()(t.examInfo),window.sessionStorage.setItem("examInfo",c),(d=t.loginInfo).studentName=r.studentName,t.set_student_info(d),t.$router.push({path:"/studentInfo",query:l})):(503===a.code&&(t.loginStatusShow=!0,t.loginMessage=a.message),t.errorMsg=a.message),o.next=18;break;case 13:throw o.prev=13,o.t0=o.catch(2),t.loginLoading=!1,t.errorMsg="登录失败，请核对登录信息",o.t0;case 18:case"end":return o.stop()}}),o,t,[[2,13]])})))()},debug:function(){return!("debug"!==this.loginInfo.userId||(f.ipcRenderer.send("debug"),0))},minmum:function(){f.ipcRenderer.send("min",!0)},max:function(){f.ipcRenderer.send("max",!0),this.maxshow=!0},wake:function(){f.ipcRenderer.send("wake",!0),this.maxshow=!0},unmax:function(){f.ipcRenderer.send("unmax",!0),this.maxshow=!1},close:function(){f.ipcRenderer.send("close")},setHost:function(){this.showHostConfig=!0},closeHostConfig:function(){this.showHostConfig=!1},Seatset:function(){this.showSeat=!0},confirmSet:function(){this.showSeat=!1,this.setbtnShow=!1,this.editshoe=!0,this.editbtnshow=!1,this.updateSeat()},setChange:function(){this.editshoe=!1,this.editbtnshow=!0,console.log("setChange")},cancelUpdateSet:function(){this.confirmSet()},UpdateSett:function(){this.confirmSet()},initSeat:function(){var e=this;_.a.get("seat_config",(function(t,o){t&&console.log(t),o.seatNo&&(e.showSeat=!1,e.setbtnShow=!1,e.editshoe=!0,e.editbtnshow=!1,e.seatNo=o.seatNo,e.setnum=o.seatNo)}))},updateSeat:function(){var e=this,t={seatNo:this.setnum,ipAddress:this.ipId};w.a.updateStuSeat(t).then((function(t){console.log(s()(t)),0===t.code?(e.seatNo=e.setnum,_.a.set("seat_config",{seatNo:e.setnum},(function(e){e&&console.log(e)}))):(e.$message({message:"该座位号已被使用，请重试！",type:"warning"}),e.setbtnShow=!0,e.editshoe=!1,e.editbtnshow=!1)}),(function(e){console.log(e)}))},initHttp:function(){window.onerror=function(e){f.ipcRenderer.send("error-in-window",e)},_.a.get("teacher_config",(function(e,t){if(e)throw e;if(t.host&&t.port){var o="http://"+t.host+":"+t.port;y.a.setBaseUrl(o)}}))},showUpdate:function(e,t,o){this.descList=t||[],this.latestVersion=e||"",this.latestVersionUrl=o,this.isUpdateShow=!0},closeUpdateNow:function(){this.isUpdateShow=!1},checkVersion:function(){var e=this,t=o(132).version;w.a.getLatestVersion().then((function(o){return 0===o.code&&o.value&&o.value.versionNo?o.value.versionNo===t?void 0:o.value.mandatoryUpdated?void f.ipcRenderer.send("download-latest-version",o.value.fileUrl):(_.a.get("ignore_version",(function(t,n){if(t)throw t;n&&n.version===o.value.versionNo||e.showUpdate(o.value.versionNo,o.value.summary,o.value.fileUrl)})),void console.log(o)):void 0}))},onClick:function(e){91===window.event.keyCode&&(e.cancelBubble=!0,e.returnValue=!1)},confirmLogin:function(){this.loginStatusShow=!1,this.errorMsg=""}}),mounted:function(){this.initHttp(),this.initSeat()}},N=(o(258),Object(h.a)(L,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login-wrapper"},[o("div",{staticClass:"top_left"},[o("img",{staticClass:"imgs",attrs:{src:"static/img/logo.png",alt:""}}),e._v(" "),o("span",{staticClass:"ipids"},[e._v("ip地址："+e._s(e.ipId))])]),e._v(" "),o("div",{staticClass:"top-btn"},[o("i",{staticClass:"iconfont el-icon-edit-outline",on:{click:function(){return e.Seatset()}}}),e._v(" "),o("i",{staticClass:"iconfont iconshezhi",on:{click:function(){return e.setHost()}}}),e._v(" "),o("i",{staticClass:"iconfont iconzuixiaohua1",on:{click:function(){return e.minmum()}}}),e._v(" "),o("i",{staticClass:"iconfont iconshanchu1",on:{click:function(){return e.close()}}})]),e._v(" "),o("div",{staticClass:"login-area"},[o("div",{staticClass:"seat-area"},[e._v("\n            座位号："+e._s(e.seatNo)+"\n        ")]),e._v(" "),e._m(0),e._v(" "),o("div",{staticClass:"form-area"},[e._m(1),e._v(" "),o("div",{staticClass:"login-form"},[o("div",{staticClass:"logo_admin"},[e._v("登录账号")]),e._v(" "),o("div",{staticStyle:{position:"relative"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.loginInfo.userId,expression:"loginInfo.userId"}],attrs:{type:"text",placeholder:"准考证号"},domProps:{value:e.loginInfo.userId},on:{focus:function(){return e.inputFocus()},input:function(t){t.target.composing||e.$set(e.loginInfo,"userId",t.target.value)}}}),e._v(" "),o("img",{staticClass:"input-icon",attrs:{src:"static/img/yzm.png"}})]),e._v(" "),e.errorMsg?o("div",{staticClass:"error-msg"},[e._v(e._s(e.errorMsg))]):e._e(),e._v(" "),o("el-button",{staticClass:"submit-btn",attrs:{type:"primary",loading:e.loginLoading},on:{click:function(){return e.platformLogin()}}},[e._v("登  录")])],1)])]),e._v(" "),e.showHostConfig?o("div",{staticClass:"host-config mask-wrapper"},[o("HostConfig",{attrs:{showUpdate:e.showUpdate,close:e.closeHostConfig}})],1):e._e(),e._v(" "),e.isUpdateShow?o("div",{staticClass:"host-config mask-wrapper"},[o("Update",{attrs:{close:e.closeUpdateNow,latestVersion:e.latestVersion,descList:e.descList,downloadUrl:e.latestVersionUrl}})],1):e._e(),e._v(" "),o("el-dialog",{attrs:{title:"座位号",visible:e.showSeat,width:"30%",center:"",closeOnClickModal:!1},on:{"update:visible":function(t){e.showSeat=t}}},[o("div",{staticClass:"set"},[o("div",{staticClass:"num"},[e._v("该考试机座位号")]),e._v(" "),o("div",[o("el-input-number",{attrs:{controls:!1,size:"small",min:1,max:999,label:"描述文字",disabled:e.editbtnshow===e.setbtnShow},model:{value:e.setnum,callback:function(t){e.setnum=t},expression:"setnum"}}),e._v(" "),e.editshoe?o("i",{staticClass:"el-icon-edit-outline",on:{click:e.setChange}}):e._e()],1)]),e._v(" "),e.setbtnShow?o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirmSet}},[e._v("确 定")])],1):e._e(),e._v(" "),e.editbtnshow?o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.cancelUpdateSet}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.UpdateSett}},[e._v("确 定")])],1):e._e()]),e._v(" "),o("el-dialog",{attrs:{title:"重复登录",visible:e.loginStatusShow,width:"26%",center:"","show-close":!1,closeOnClickModal:!1},on:{"update:visible":function(t){e.loginStatusShow=t}}},[o("div",{staticClass:"set"},[o("div",{staticClass:"num"},[e._v(e._s(e.loginMessage))])]),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirmLogin}},[e._v("确 定")])],1)])],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"logo"},[t("img",{attrs:{src:"static/img/logo2.png"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("img",{attrs:{src:"static/img/chahua.png"}})])}],!1,null,"e9af6804",null));t.default=N.exports}}]);